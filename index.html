<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zaid Sohail CV</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lenis@1.1.4/dist/lenis.min.js"></script>
    <style>
        .bg-image {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('zaid.JPG');
            background-size: cover;
            background-position: center;
        }
        .service-card:hover {
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        .portfolio-item:hover .portfolio-overlay {
            opacity: 1;
        }
        .portfolio-overlay {
            opacity: 0;
            transition: all 0.3s ease;
        }
    </style>
    <!-- GSAP + ScrollTrigger -->
    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js" defer></script>
    <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js" defer></script>
    
</head>
<body class="font-sans">
    <!-- Navigation -->
    <nav class="fixed w-full bg-white shadow-md z-50">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#home" class="text-2xl font-bold text-gray-800 shiny-text">Zaid Sohail</a>
            <div id="mobile-menu" class="hidden md:flex space-x-8">
                <a href="#home" class="text-gray-800 hover:text-blue-600">HOME</a>
                <a href="#about" class="text-gray-800 hover:text-blue-600">ABOUT</a>
                <a href="#services" class="text-gray-800 hover:text-blue-600">SERVICES</a>
                <a href="#work" class="text-gray-800 hover:text-blue-600">WORK</a>
                <a href="#contact" class="text-gray-800 hover:text-blue-600">CONTACT</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden" style="z-index: 50;">
                <i data-feather="menu"></i>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="bg-image min-h-screen flex items-center justify-center text-white pt-20">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 shiny-text scroll-float">I'm Zaid Sohail</h1>
            <p class="text-xl md:text-2xl mb-8">Developer | Designer | Student</p>
            <div class="animate-bounce">
                <a href="#about" class="inline-block">
                    <i data-feather="arrow-down-circle" class="w-10 h-10"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-10 md:mb-0">
                    <div id="about-card" class="pc-card-wrapper">
                        <section class="pc-card">
                            <div class="pc-inside">
                                <div class="pc-shine"></div>
                                <div class="pc-glare"></div>
                                <div class="pc-content">
                                    <div class="bg-white p-8 shadow-lg rounded-lg">
                        <div class="flex items-center mb-4">
                            <img src="zaid.JPG" alt="Profile" class="w-32 h-32 rounded-full object-cover">
                            <div class="ml-6">
                                <p class="font-bold">Name: <span class="font-normal">Zaid Sohail</span></p>
                                <p class="font-bold">Profile: <span class="font-normal">CS Student</span></p>
                                <p class="font-bold">Email: <span class="font-normal">zaidsohail555@gmail.com</span></p>
                                <p class="font-bold">Phone: <span class="font-normal">+92 315 6338828</span></p>
                            </div>
                        </div>
                        <div class="mt-6">
                            <h3 class="font-bold mb-2">Skills</h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <span>C++</span>
                                        <span>85%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-blue-600 h-2.5 rounded-full" style="width: 85%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <span>HTML & CSS</span>
                                        <span>75%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-blue-600 h-2.5 rounded-full" style="width: 75%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <span>Python</span>
                                        <span>70%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-blue-600 h-2.5 rounded-full" style="width: 70%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
                <div class="md:w-1/2 md:pl-12">
                    <h2 class="text-3xl font-bold mb-6 shiny-text scroll-float">About me</h2>
                    <p class="text-gray-600 mb-4">
                        I'm Zaid Sohail, a Computer Science student passionate about software development, problem solving, and learning new technologies. I enjoy building efficient algorithms, clean user interfaces, and automations that make life easier. My current focus is strengthening my skills in C++, data structures & algorithms, and web development.
                    </p>

                    
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold mb-4 shiny-text scroll-float">SERVICES</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">I offer web design, development and automation services.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="service-card bg-white p-6 rounded-lg shadow-md text-center">
                    <div class="bg-blue-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4">
                        <i data-feather="code" class="w-8 h-8 text-blue-600"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">WEB DESIGN</h3>
                    <p class="text-gray-600">Modern responsive design using HTML, CSS and Tailwind.</p>
                </div>
                <div class="service-card bg-white p-6 rounded-lg shadow-md text-center">
                    <div class="bg-blue-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4">
                        <i data-feather="monitor" class="w-8 h-8 text-blue-600"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">WEB DEVELOPMENT</h3>
                    <p class="text-gray-600">Full-stack development with Python and JavaScript.</p>
                </div>
                <div class="service-card bg-white p-6 rounded-lg shadow-md text-center">
                    <div class="bg-blue-100 w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4">
                        <i data-feather="camera" class="w-8 h-8 text-blue-600"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">PHOTOGRAPHY</h3>
                    <p class="text-gray-600">Photo editing and basic photography services.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Portfolio Section -->
    <section id="work" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold mb-4 shiny-text scroll-float">PORTFOLIO</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">A selection of projects I've worked on.</p>
            </div>
            <!-- Logo Loop Section -->
            <div class="logo-loop-container mb-16">
                <div class="logo-loop-wrapper">
                    <div class="logo-loop-track">
                        <div class="logo-item">
                            <img src="C++.jpeg" alt="C++" class="logo-image">
                            <span class="logo-text">C++</span>
                        </div>
                        <div class="logo-item">
                            <img src="HTML.png" alt="HTML" class="logo-image">
                            <span class="logo-text">HTML</span>
                        </div>
                        <div class="logo-item">
                            <img src="CSS.png" alt="CSS" class="logo-image">
                            <span class="logo-text">CSS</span>
                        </div>
                        <div class="logo-item">
                            <img src="Python.png" alt="Python" class="logo-image">
                            <span class="logo-text">Python</span>
                        </div>
                        <!-- Duplicate for seamless loop -->
                        <div class="logo-item">
                            <img src="C++.jpeg" alt="C++" class="logo-image">
                            <span class="logo-text">C++</span>
                        </div>
                        <div class="logo-item">
                            <img src="HTML.png" alt="HTML" class="logo-image">
                            <span class="logo-text">HTML</span>
                        </div>
                        <div class="logo-item">
                            <img src="CSS.png" alt="CSS" class="logo-image">
                            <span class="logo-text">CSS</span>
                        </div>
                        <div class="logo-item">
                            <img src="Python.png" alt="Python" class="logo-image">
                            <span class="logo-text">Python</span>
                        </div>
                    </div>
                </div>
            </div>

    </section>

    

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row">
                <div class="md:w-1/2 mb-10 md:mb-0 md:pr-6">
                    <h2 class="text-3xl font-bold mb-6 scroll-float">Send Us a Message</h2>
                    <!-- Contact form: mailto fallback + JS handler to open user's email client -->
                    <form id="contact-form" class="space-y-6" action="mailto:zaidsohail555@gmail.com" method="post" enctype="text/plain">
                        <div>
                            <input id="contact-name" name="name" type="text" placeholder="Your Name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <input id="contact-email" name="email" type="email" placeholder="Your Email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <input id="contact-subject" name="subject" type="text" placeholder="Subject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <textarea id="contact-message" name="message" placeholder="Message" rows="5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                        </div>
                        <div>
                            <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-300">Send Message</button>
                        </div>
                    </form>
                </div>
                <div class="md:w-1/2 md:pl-6">
                    <h2 class="text-3xl font-bold mb-6 scroll-float">Get in Touch</h2>
                    <p class="text-gray-600 mb-6">
                        If you'd like to collaborate, hire me, or have a question, please use the contact form or the details on the right — I’ll respond as soon as possible.
                    </p>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <i data-feather="map-pin" class="w-5 h-5 mt-1 text-blue-600"></i>
                            <div class="ml-4">
                                <h3 class="font-semibold">Location:</h3>
                                <p class="text-gray-600">Lahore, Pakistan</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i data-feather="mail" class="w-5 h-5 mt-1 text-blue-600"></i>
                            <div class="ml-4">
                                <h3 class="font-semibold">Email:</h3>
                                <p class="text-gray-600">zaidsohail555@gmail.com</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i data-feather="phone" class="w-5 h-5 mt-1 text-blue-600"></i>
                            <div class="ml-4">
                                <h3 class="font-semibold">Call:</h3>
                                <p class="text-gray-600">+92 315 6338828</p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 flex space-x-4">
                        <a href="https://www.facebook.com/h.zaid.sohail" target="_blank" rel="noopener noreferrer" title="Facebook" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white">
                            <i data-feather="facebook"></i>
                        </a>
                            <a href="https://x.com/zaidsohail345" target="_blank" rel="noopener noreferrer" title="X (Twitter)" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white">
                                X
                            </a>
                        <a href="https://www.instagram.com/h.zaid01" target="_blank" rel="noopener noreferrer" title="Instagram" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white">
                            <i data-feather="instagram"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/h-zaid01" target="_blank" rel="noopener noreferrer" title="LinkedIn" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white">
                            <i data-feather="linkedin"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-6 bg-gray-800 text-white text-center">
        <div class="container mx-auto px-6">
            <p>© Copyright <span class="font-bold">Zaid Sohail</span>. All Rights Reserved</p>
            <p class="mt-2">Designed by <a href="#" class="text-blue-400 hover:underline">Zaid Sohail</a></p>
        </div>
    </footer>

    <!-- Back to top button -->
    <a href="#home" class="fixed bottom-6 right-6 bg-blue-600 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg hover:bg-blue-700 transition duration-300">
        <i data-feather="arrow-up"></i>
    </a>

    <!-- ClickSpark Canvas -->
    <canvas id="click-spark-canvas" style="position:fixed;inset:0;pointer-events:none;z-index:60;display:block;width:100vw;height:100vh"></canvas>

    <script>
        // GSAP ScrollFloat effect for headings
        (function () {
            if (!(window.gsap && window.ScrollTrigger)) return;
            gsap.registerPlugin(ScrollTrigger);

            // Split text into span.char nodes
            function splitIntoChars(element) {
                if (!element || element.dataset.split === '1') return;
                const text = element.textContent;
                const frag = document.createDocumentFragment();
                for (let i = 0; i < text.length; i++) {
                    const ch = text[i] === ' ' ? '\u00A0' : text[i];
                    const span = document.createElement('span');
                    span.className = 'char';
                    span.textContent = ch;
                    frag.appendChild(span);
                }
                element.textContent = '';
                element.appendChild(frag);
                element.dataset.split = '1';
            }

            const targets = Array.from(document.querySelectorAll('.scroll-float'));
            targets.forEach((el) => {
                splitIntoChars(el);
                const chars = el.querySelectorAll('.char');
                gsap.fromTo(
                    chars,
                    {
                        willChange: 'opacity, transform',
                        opacity: 0,
                        yPercent: 120,
                        scaleY: 2.3,
                        scaleX: 0.7,
                        transformOrigin: '50% 0%'
                    },
                    {
                        duration: 1,
                        ease: 'back.inOut(2)',
                        opacity: 1,
                        yPercent: 0,
                        scaleY: 1,
                        scaleX: 1,
                        stagger: 0.03,
                        scrollTrigger: {
                            trigger: el,
                            start: 'center bottom+=50%',
                            end: 'bottom bottom-=40%',
                            scrub: true
                        }
                    }
                );
            });
        })();
    </script>
    <script>
        // Vanilla tilt for the About profile card
        (function tiltProfileCard() {
            const wrap = document.getElementById('about-card');
            if (!wrap) return;
            const card = wrap.querySelector('.pc-card');
            if (!card) return;

            let rafId = null;
            const clamp = (v, min = 0, max = 100) => Math.min(Math.max(v, min), max);
            const adjust = (value, a, b, c, d) => c + ((d - c) * (value - a)) / (b - a);

            function update(offsetX, offsetY) {
                const rect = card.getBoundingClientRect();
                const w = rect.width, h = rect.height;
                const percentX = clamp((100 / w) * offsetX);
                const percentY = clamp((100 / h) * offsetY);
                const centerX = percentX - 50;
                const centerY = percentY - 50;

                wrap.style.setProperty('--pointer-x', percentX + '%');
                wrap.style.setProperty('--pointer-y', percentY + '%');
                wrap.style.setProperty('--background-x', adjust(percentX, 0, 100, 35, 65) + '%');
                wrap.style.setProperty('--background-y', adjust(percentY, 0, 100, 35, 65) + '%');
                wrap.style.setProperty('--pointer-from-center', Math.min(Math.hypot(centerX, centerY) / 50, 1));
                card.style.transform = `rotateX(${(centerY/4).toFixed(2)}deg) rotateY(${(-centerX/5).toFixed(2)}deg)`;
            }

            function onEnter() { card.classList.add('active'); }
            function onLeave(e) {
                card.classList.remove('active');
                const startX = e.offsetX, startY = e.offsetY;
                const start = performance.now();
                const dur = 500;
                const cx = card.clientWidth/2, cy = card.clientHeight/2;
                const ease = t => (t<0.5 ? 4*t*t*t : 1 - Math.pow(-2*t+2,3)/2);
                const loop = (now) => {
                    const p = Math.min((now-start)/dur, 1);
                    const ep = ease(p);
                    update(startX + (cx-startX)*ep, startY + (cy-startY)*ep);
                    if (p < 1) rafId = requestAnimationFrame(loop);
                };
                rafId && cancelAnimationFrame(rafId);
                rafId = requestAnimationFrame(loop);
            }
            function onMove(e) {
                const rect = card.getBoundingClientRect();
                update(e.clientX - rect.left, e.clientY - rect.top);
            }

            card.addEventListener('pointerenter', onEnter);
            card.addEventListener('pointerleave', onLeave);
            card.addEventListener('pointermove', onMove);

            // initialize slight offset and ease to center
            const initX = card.clientWidth - 70;
            const initY = 60;
            update(initX, initY);
            onLeave({ offsetX: initX, offsetY: initY });
        })();
    </script>
    <script>
        // Enhanced UI: feather icons, smooth scrolling, reveal-on-scroll, typewriter, navbar behavior, skill animation
        if (typeof feather !== 'undefined') feather.replace();

        // Smooth scrolling for anchor links (immediate and accessible)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth' });
            });
        });

        // Simple typewriter for hero subtitle (non-blocking)
        (function heroTypewriter() {
            const el = document.querySelector('#home p');
            if (!el) return;
            const text = el.textContent.trim();
            el.textContent = '';
            el.classList.add('typewriter-caret');
            let i = 0;
            const t = setInterval(() => {
                el.textContent += text.charAt(i);
                i++;
                if (i >= text.length) { clearInterval(t); el.classList.remove('typewriter-caret'); }
            }, 40);
        })();

        // Reveal elements when they enter viewport
        (function revealOnScroll() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.18 });

            document.querySelectorAll('section, .card, .portfolio-item, .service-card').forEach(el => {
                el.classList.add('reveal');
                observer.observe(el);
            });
        })();

        // Navbar: add subtle background when scrolling and swap brand text
        (function navOnScroll() {
            const nav = document.querySelector('nav');
            if (!nav) return;
            const brandLink = nav.querySelector('a') || null;
            const originalText = brandLink ? brandLink.textContent.trim() : '';
            const scrolledText = 'Zaid Sohail';

            const onScroll = () => {
                if (window.scrollY > 20) {
                    nav.classList.add('neon-border');
                    if (brandLink) brandLink.textContent = scrolledText;
                } else {
                    nav.classList.remove('neon-border');
                    if (brandLink) brandLink.textContent = originalText;
                }
            };

            // Also change when resizing or on load
            window.addEventListener('scroll', onScroll);
            window.addEventListener('load', onScroll);
            window.addEventListener('resize', onScroll);
        })();

        // Skill bars: animate sequentially when About becomes visible
        (function skillBars() {
            const about = document.getElementById('about');
            if (!about) return;
            const bars = Array.from(about.querySelectorAll('.w-full.bg-gray-200 > div'));
            if (!bars.length) return;

            // normalize: add skill-fill class and capture targets
            bars.forEach(b => {
                const s = b.getAttribute('style') || '';
                const m = s.match(/width:\s*([^;]+);?/i);
                b.dataset.targetWidth = m ? m[1].trim() : (b.style.width || '80%');
                b.classList.add('skill-fill');
                b.style.width = '0%';
            });

            const io = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        bars.forEach((b, i) => {
                            setTimeout(() => {
                                b.style.width = b.dataset.targetWidth;
                                b.classList.add('glow');
                            }, i * 160);
                        });
                        obs.disconnect();
                    }
                });
            }, { threshold: 0.25 });
            io.observe(about);
        })();

        // Back-to-top button visibility
        (function backToTop() {
            const btn = document.querySelector('a[href="#home"]');
            if (!btn) return;
            const onScroll = () => {
                if (window.scrollY > 400) { btn.classList.remove('back-to-top-hidden'); btn.classList.add('back-to-top-visible'); }
                else { btn.classList.add('back-to-top-hidden'); btn.classList.remove('back-to-top-visible'); }
            };
            onScroll();
            window.addEventListener('scroll', onScroll);
        })();

        // Contact form mailto handler (preserve original behavior)
        (function() {
            const form = document.getElementById('contact-form');
            if (!form) return;
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('contact-name').value.trim();
                const email = document.getElementById('contact-email').value.trim();
                const subject = document.getElementById('contact-subject').value.trim();
                const message = document.getElementById('contact-message').value.trim();

                const to = 'zaidsohail555@gmail.com';
                const bodyLines = [];
                bodyLines.push('Name: ' + name);
                bodyLines.push('Email: ' + email);
                bodyLines.push('');
                bodyLines.push(message);
                const body = encodeURIComponent(bodyLines.join('\n'));
                const mailto = `mailto:${to}?subject=${encodeURIComponent(subject)}&body=${body}`;

                try { window.location.href = mailto; } catch (err) { alert('Could not open mail client. Please send an email to ' + to + ' with your message.'); }
            });
        })();

        // Logo Loop functionality
        (function logoLoop() {
            const container = document.querySelector('.logo-loop-container');
            if (!container) return;
            
            const track = container.querySelector('.logo-loop-track');
            const items = container.querySelectorAll('.logo-item');
            
            // Add click handlers for each logo
            items.forEach(item => {
                item.addEventListener('click', function() {
                    const text = this.querySelector('.logo-text').textContent;
                    console.log(`Clicked on ${text} logo`);
                    // You can add more functionality here, like opening links
                });
            });
            
            // Optional: Add intersection observer to pause animation when not visible
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        track.style.animationPlayState = 'running';
                    } else {
                        track.style.animationPlayState = 'paused';
                    }
                });
            }, { threshold: 0.1 });
            
            observer.observe(container);
        })();

        // ClickSpark - global click spark effect
        (function clickSpark() {
            const canvas = document.getElementById('click-spark-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');

            let sparks = [];
            let animationId = null;
            let resizeTimeout;

            function resize() {
                const dpr = window.devicePixelRatio || 1;
                const { innerWidth: w, innerHeight: h } = window;
                const cssW = w, cssH = h;
                if (canvas.width !== Math.floor(cssW * dpr) || canvas.height !== Math.floor(cssH * dpr)) {
                    canvas.width = Math.floor(cssW * dpr);
                    canvas.height = Math.floor(cssH * dpr);
                    canvas.style.width = cssW + 'px';
                    canvas.style.height = cssH + 'px';
                    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
                }
            }

            const RO = new ResizeObserver(() => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(resize, 80);
            });
            RO.observe(document.body);
            resize();

            const config = {
                sparkColor: '#60a5fa',
                sparkSize: 12,
                sparkRadius: 18,
                sparkCount: 10,
                duration: 420,
                extraScale: 1.0
            };

            function easeOut(t){ return t * (2 - t); }

            function draw(ts) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                const now = performance.now();

                sparks = sparks.filter(s => {
                    const elapsed = now - s.start;
                    if (elapsed >= config.duration) return false;
                    const p = elapsed / config.duration;
                    const e = easeOut(p);
                    const dist = e * config.sparkRadius * config.extraScale;
                    const len = config.sparkSize * (1 - e);
                    const x1 = s.x + dist * Math.cos(s.a);
                    const y1 = s.y + dist * Math.sin(s.a);
                    const x2 = s.x + (dist + len) * Math.cos(s.a);
                    const y2 = s.y + (dist + len) * Math.sin(s.a);
                    ctx.strokeStyle = config.sparkColor;
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x1, y1);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                    return true;
                });

                animationId = requestAnimationFrame(draw);
            }

            function spawn(e){
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const now = performance.now();
                for (let i = 0; i < config.sparkCount; i++) {
                    sparks.push({ x, y, a: (2*Math.PI*i)/config.sparkCount, start: now });
                }
            }

            window.addEventListener('click', spawn, { passive: true });
            animationId = requestAnimationFrame(draw);

            // cleanup on page hide/unload
            window.addEventListener('beforeunload', () => {
                cancelAnimationFrame(animationId);
                window.removeEventListener('click', spawn);
                RO.disconnect();
            });
        })();

        // Chroma Grid mouse tracking and links
        (function chromaGrid() {
            const grid = document.querySelector('.chroma-grid');
            if (!grid) return;
            const cards = Array.from(grid.querySelectorAll('.chroma-card'));

            function onMoveCard(e){
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                this.style.setProperty('--mouse-x', x + 'px');
                this.style.setProperty('--mouse-y', y + 'px');
            }

            function onClickCard(){
                const url = this.getAttribute('data-url');
                if (url && url !== '#') window.open(url, '_blank', 'noopener,noreferrer');
            }

            cards.forEach(card => {
                card.addEventListener('mousemove', onMoveCard);
                card.addEventListener('click', onClickCard);
            });

            // Grid-level spotlight follows pointer
            const setX = (v)=> grid.style.setProperty('--x', v + 'px');
            const setY = (v)=> grid.style.setProperty('--y', v + 'px');
            const rect = () => grid.getBoundingClientRect();
            function onMove(e){
                const r = rect();
                setX(e.clientX - r.left);
                setY(e.clientY - r.top);
                grid.querySelector('.chroma-fade').style.opacity = '0';
            }
            function onLeave(){
                grid.querySelector('.chroma-fade').style.opacity = '1';
            }
            grid.addEventListener('pointermove', onMove);
            grid.addEventListener('pointerleave', onLeave);
        })();
    </script>
</body>
</html>
